<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Extreme Demon Roulette</title>
<style>
  body {
    background-color: #121212;
    color: #eee;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 20px 40px;
  }

  /* Filters on left stacked */
  .filters {
    display: flex;
    flex-direction: column;
    gap: 10px;
    font-size: 14px;
    margin-bottom: 20px;
    user-select: none;
  }
  .filters label {
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
  }
  .filters input[type="checkbox"] {
    width: 16px;
    height: 16px;
    cursor: pointer;
  }

  /* Header container with filters and header aligned horizontally */
  .top-container {
    display: flex;
    gap: 60px;
    align-items: flex-start;
    max-width: 900px;
    margin-bottom: 10px;
  }

  /* Header with flexbox */
  header {
    flex-grow: 1;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 2px dotted #888;
    padding-bottom: 6px;
  }

  /* Left flex item to balance buttons, invisible but takes space */
  .header-left-space {
    width: 140px; /* same width as button group */
    flex-shrink: 0;
  }

  /* Title centered inside its container */
  .title {
    font-weight: 700;
    font-size: 1.8rem;
    color: #ddd;
    text-align: center;
    flex-grow: 1;
    user-select: none;
  }

  /* Buttons container */
  .btn-group {
    display: flex;
    gap: 12px;
    width: 140px; /* fixed width */
    flex-shrink: 0;
  }
  .btn {
    padding: 8px 20px;
    font-size: 14px;
    font-weight: 600;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    user-select: none;
    color: white;
    transition: background-color 0.2s ease;
    white-space: nowrap;
  }
  .btn.save {
    background-color: #2978f0;
  }
  .btn.save:hover {
    background-color: #4a9bff;
  }
  .btn.restart {
    background-color: #d43838;
  }
  .btn.restart:hover {
    background-color: #f05050;
  }

  /* Card container */
  #cardContainer {
    max-width: 900px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  /* Card style */
  .card {
    display: flex;
    align-items: center;
    background-color: #1f1f1f;
    border-radius: 8px;
    padding: 20px 24px;
    box-shadow: 0 0 8px rgba(0,0,0,0.5);
  }
  .card.done {
    background-color: #1e3d27;
  }
  .card.failed {
    background-color: #3d1e1e;
  }

  /* Image on left */
  .card img {
    width: 160px;
    height: 90px;
    border-radius: 6px;
    object-fit: cover;
    margin-right: 28px;
    flex-shrink: 0;
    box-shadow: 0 0 6px rgba(0,0,0,0.6);
  }

  /* Info middle */
  .card-info {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .card-title {
    font-size: 1.15rem;
    font-weight: 700;
    color: #eee;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .card-title .copy-icon {
    cursor: pointer;
    opacity: 0.5;
    transition: opacity 0.2s;
    font-size: 0.9rem;
  }
  .card-title .copy-icon:hover {
    opacity: 1;
  }
  .card-sub {
    font-style: italic;
    color: #bbb;
  }

  /* Controls right */
  .controls {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 12px;
    min-width: 140px;
    margin-left: auto;
  }
  .controls input {
    width: 140px;
    padding: 8px 10px;
    font-size: 14px;
    border-radius: 6px;
    border: 1px solid #444;
    background-color: #121212;
    color: #eee;
    text-align: center;
    outline-offset: 2px;
  }
  .controls input:disabled {
    background-color: #2b2b2b;
    color: #888;
  }
  .btn-row {
    display: flex;
    gap: 12px;
    width: 100%;
  }
  .controls .done,
  .controls .giveup {
    flex: 1;
    padding: 8px 0;
    font-weight: 600;
    border-radius: 6px;
    cursor: pointer;
    border: none;
    color: white;
    user-select: none;
    text-align: center;
  }
  .controls .done {
    background-color: #10b981;
  }
  .controls .done:hover:not(:disabled) {
    background-color: #12d78f;
  }
  .controls .giveup {
    background-color: #ef4444;
  }
  .controls .giveup:hover:not(:disabled) {
    background-color: #f66b6b;
  }
  .controls.disabled {
    opacity: 0.5;
    pointer-events: none;
  }
</style>
</head>
<body>

<div class="top-container">
  <div class="filters" aria-label="Level list filters">
    <label><input type="checkbox" checked /> Main list</label>
    <label><input type="checkbox" checked /> Extended list</label>
    <label><input type="checkbox" /> Legacy list</label>
  </div>

  <header>
    <div class="header-left-space"></div>
    <h2 class="title" tabindex="0">Extreme Demon Roulette</h2>
    <div class="btn-group">
      <button class="btn save" onclick="saveProgress()">Save</button>
      <button class="btn restart" onclick="resetRoulette()">Restart</button>
    </div>
  </header>
</div>

<div id="cardContainer"></div>

<div style="max-width: 900px; margin: 20px auto; text-align: right;">
  <button class="btn save" onclick="generateCard()">Generate</button>
</div>

<script>
  const used = [];
  const levels = {
    41: {
      title: "#41 - SARYYX NEVER CLEAR",
      author: "artos",
      img: "https://drive.google.com/uc?export=view&id=1rAa3LwZdD_L8W1YQXKJ1aJS1DcmcbZz9"
    },
    42: {
      title: "#42 - NEW EXTREME DEMON",
      author: "creator",
      img: "https://via.placeholder.com/160x90?text=Level+42"
    }
    // Add more levels here...
  };

  function generateCard() {
    let keys = Object.keys(levels).map(n => parseInt(n));
    let available = keys.filter(k => !used.includes(k));
    if (available.length === 0) {
      alert("No more levels available to generate.");
      return;
    }

    let pick = available[Math.floor(Math.random() * available.length)];
    used.push(pick);

    const level = levels[pick];
    const container = document.getElementById("cardContainer");

    const card = document.createElement("div");
    card.className = "card";

    const img = document.createElement("img");
    img.src = level.img;
    img.alt = `Thumbnail for ${level.title}`;
    card.appendChild(img);

    const info = document.createElement("div");
    info.className = "card-info";

    const copyIcon = document.createElement("span");
    copyIcon.textContent = "ðŸ“‹";
    copyIcon.title = "Copy level title";
    copyIcon.className = "copy-icon";
    copyIcon.onclick = () => {
      navigator.clipboard.writeText(level.title).then(() => {
        alert("Level title copied!");
      });
    };

    const titleDiv = document.createElement("div");
    titleDiv.className = "card-title";
    titleDiv.appendChild(document.createTextNode(level.title));
    titleDiv.appendChild(copyIcon);
    info.appendChild(titleDiv);

    const authorDiv = document.createElement("div");
    authorDiv.className = "card-sub";
    authorDiv.textContent = `by ${level.author}`;
    info.appendChild(authorDiv);

    card.appendChild(info);

    const controls = document.createElement("div");
    controls.className = "controls";

    const input = document.createElement("input");
    input.placeholder = "At least 1%";

    const btnRow = document.createElement("div");
    btnRow.className = "btn-row";

    const done = document.createElement("button");
    done.className = "done";
    done.textContent = "Done";
    done.onclick = () => {
      const val = input.value.trim();
      const num = parseFloat(val);

      if (!val || isNaN(num) || num < 1) {
        alert("Please enter a percentage of at least 1% before marking as done.");
        return;
      }

      card.classList.add("done");
      controls.classList.add("disabled");
      input.disabled = true;
      done.disabled = true;
      giveup.disabled = true;
    };

    const giveup = document.createElement("button");
    giveup.className = "giveup";
    giveup.textContent = "Give up";
    giveup.onclick = () => {
      card.classList.add("failed");
      controls.classList.add("disabled");
      input.disabled = true;
      done.disabled = true;
      giveup.disabled = true;
    };

    btnRow.appendChild(done);
    btnRow.appendChild(giveup);
    controls.appendChild(input);
    controls.appendChild(btnRow);

    card.appendChild(controls);

    container.appendChild(card);
  }

  function saveProgress() {
    alert("Save functionality not implemented.");
  }

  function resetRoulette() {
    const container = document.getElementById("cardContainer");
    container.innerHTML = "";
    used.length = 0;
  }
</script>
</body>
</html>
